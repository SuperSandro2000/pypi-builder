FROM {% if arch is defined %}{{arch}}/{% endif %}python:3-{% if dist is defined %}{{dist}}{% else %}buster{% endif %}

{% if dist == "alpine" %}RUN apk add bash make{% endif %}

RUN pip3 install twine wheel

COPY [ "Makefile", "/data/" ]

VOLUME /data/packages
WORKDIR /data
CMD [ "make" ]
